{
  "name" : "i-489-internal-bdds-api-otp",
  "crossId" : "e52fef67-206c-4090-afef-67206c709081",
  "version" : "1.0.0",
  "execution_mode" : "v3",
  "description" : "API BDDS expos√© en interne pour les communications beyond to beyond",
  "visibility" : "PRIVATE",
  "flows" : [ {
    "id" : "5afc72e5-a0ba-48ba-bc72-e5a0ba88ba8c",
    "name" : "",
    "path-operator" : {
      "path" : "/searchBeneficiaries",
      "operator" : "EQUALS"
    },
    "condition" : "",
    "consumers" : [ ],
    "methods" : [ "POST" ],
    "pre" : [ {
      "name" : "Dynamic Routing",
      "description" : "",
      "enabled" : true,
      "policy" : "dynamic-routing",
      "configuration" : {"rules":[{"pattern":"/searchBeneficiaries","url":"https://i-489.dev.beyond.cegedim.cloud/serviceeligibility/otp-search/"}]}
    } ],
    "post" : [ ],
    "enabled" : true
  }, {
    "id" : "67a4f48a-1dbc-49a8-a4f4-8a1dbca9a830",
    "name" : "",
    "path-operator" : {
      "path" : "/beneficiaryTpDetails",
      "operator" : "EQUALS"
    },
    "condition" : "",
    "consumers" : [ ],
    "methods" : [ "GET" ],
    "pre" : [ {
      "name" : "Dynamic Routing",
      "description" : "",
      "enabled" : true,
      "policy" : "dynamic-routing",
      "configuration" : {"rules":[{"pattern":"/beneficiaryTpDetails","url":"https://i-489.dev.beyond.cegedim.cloud/serviceeligibility/otp-detail/"}]}
    } ],
    "post" : [ ],
    "enabled" : true
  } ],
  "gravitee" : "2.0.0",
  "flow_mode" : "BEST_MATCH",
  "resources" : [ ],
  "properties" : [ ],
  "labels" : [ "ajo" ],
  "pages" : [ {
    "id" : "b7905c3c-d5c3-3f01-bd32-f168ce4f04e3",
    "crossId" : "cf4a8046-5743-4345-8a80-46574383455f",
    "name" : "Aside",
    "type" : "SYSTEM_FOLDER",
    "order" : 0,
    "published" : true,
    "visibility" : "PUBLIC",
    "lastModificationDate" : 1694071227720,
    "contentType" : "application/json",
    "configuration" : { },
    "homepage" : false,
    "parentPath" : "",
    "excludedAccessControls" : false,
    "accessControls" : [ ],
    "metadata" : { },
    "api" : "d6e68e78-3f25-430e-a68e-783f25630ec4",
    "attached_media" : [ ]
  }, {
    "id" : "95e9f285-aa47-3670-af63-74273733baf7",
    "crossId" : "2c58c324-3ad6-44e8-98c3-243ad614e88c",
    "name" : "Swagger",
    "type" : "SWAGGER",
    "content" : "{\"openapi\": \"3.0.1\", \"info\": {\"title\": \"dev-evol2-internal-bdds-api-otp\", \"version\": \"1.0.0\", \"contact\": {}, \"description\": \"API BDDS expos\\u00e9 en interne pour les communications beyond to beyond\"}, \"servers\": [{\"url\": \"/beyond/internal/api/bdds/v1/otp\"}], \"security\": [{\"bearer\": [\"read\", \"write\"]}], \"paths\": {\"/beneficiaryTpDetails\": {\"get\": {\"operationId\": \"getById_1\", \"parameters\": [{\"in\": \"path\", \"name\": \"benefId\", \"required\": true, \"schema\": {\"type\": \"string\"}}], \"responses\": {\"200\": {\"content\": {\"*/*\": {\"schema\": {\"$ref\": \"#/components/schemas/BenefAIV5\"}}}, \"description\": \"OK\"}}, \"tags\": [\"elastic-controller\"]}}, \"/searchBeneficiaries\": {\"post\": {\"operationId\": \"search\", \"requestBody\": {\"content\": {\"application/json\": {\"schema\": {\"$ref\": \"#/components/schemas/BenefSearchRequest\"}}}, \"required\": true}, \"responses\": {\"200\": {\"content\": {\"*/*\": {\"schema\": {\"$ref\": \"#/components/schemas/BenefElasticPageResult\"}}}, \"description\": \"OK\"}}, \"tags\": [\"elastic-controller\"]}}}, \"components\": {\"schemas\": {\"Adresse\": {\"type\": \"object\", \"properties\": {\"codePostal\": {\"type\": \"string\"}, \"email\": {\"type\": \"string\"}, \"ligne1\": {\"type\": \"string\"}, \"ligne2\": {\"type\": \"string\"}, \"ligne3\": {\"type\": \"string\"}, \"ligne4\": {\"type\": \"string\"}, \"ligne5\": {\"type\": \"string\"}, \"ligne6\": {\"type\": \"string\"}, \"ligne7\": {\"type\": \"string\"}, \"pays\": {\"type\": \"string\"}, \"telephone\": {\"type\": \"string\"}, \"typeAdresse\": {\"$ref\": \"#/components/schemas/TypeAdresse\"}}}, \"AdresseAssure\": {\"type\": \"object\", \"properties\": {\"codePostal\": {\"type\": \"string\"}, \"ligne1\": {\"type\": \"string\"}, \"ligne2\": {\"type\": \"string\"}, \"ligne3\": {\"type\": \"string\"}, \"ligne4\": {\"type\": \"string\"}, \"ligne5\": {\"type\": \"string\"}, \"ligne6\": {\"type\": \"string\"}, \"ligne7\": {\"type\": \"string\"}}}, \"Amc\": {\"type\": \"object\", \"properties\": {\"idDeclarant\": {\"type\": \"string\"}, \"libelle\": {\"type\": \"string\"}}}, \"Audit\": {\"type\": \"object\", \"properties\": {\"dateEmission\": {\"type\": \"string\"}}}, \"BenefAIV5\": {\"type\": \"object\", \"properties\": {\"amc\": {\"$ref\": \"#/components/schemas/Amc\"}, \"audit\": {\"$ref\": \"#/components/schemas/Audit\"}, \"contrats\": {\"type\": \"array\", \"items\": {\"$ref\": \"#/components/schemas/ContratV5\"}}, \"id\": {\"type\": \"string\"}, \"idClientBO\": {\"type\": \"string\"}, \"identite\": {\"$ref\": \"#/components/schemas/IdentiteContrat\"}, \"key\": {\"type\": \"string\"}, \"numeroAdherent\": {\"type\": \"string\"}, \"services\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"traceId\": {\"type\": \"string\"}}}, \"BenefElasticPageResult\": {\"type\": \"object\", \"properties\": {\"data\": {\"type\": \"array\", \"items\": {\"$ref\": \"#/components/schemas/BenefAIV5\"}}, \"paging\": {\"$ref\": \"#/components/schemas/PagingResponseModel\"}}}, \"BenefSearchRequest\": {\"type\": \"object\", \"properties\": {\"bic\": {\"type\": \"string\"}, \"birthDate\": {\"type\": \"string\"}, \"birthRank\": {\"type\": \"string\"}, \"city\": {\"type\": \"string\"}, \"contractNumber\": {\"type\": \"string\"}, \"declarantId\": {\"type\": \"string\"}, \"declarantIdOrLabel\": {\"type\": \"string\"}, \"declarantLabel\": {\"type\": \"string\"}, \"email\": {\"type\": \"string\"}, \"firstName\": {\"type\": \"string\"}, \"iban\": {\"type\": \"string\"}, \"insurerExchangeId\": {\"type\": \"string\"}, \"issuingCompany\": {\"type\": \"string\"}, \"name\": {\"type\": \"string\"}, \"nameOrSubscriberIdorContractNumber\": {\"type\": \"string\"}, \"nir\": {\"type\": \"string\"}, \"page\": {\"type\": \"integer\", \"format\": \"int32\"}, \"perPage\": {\"type\": \"integer\", \"format\": \"int32\"}, \"postalCode\": {\"type\": \"string\"}, \"street\": {\"type\": \"string\"}, \"subscriberId\": {\"type\": \"string\"}, \"subscriberIdOrContractNumber\": {\"type\": \"string\"}, \"subscriberNumber\": {\"type\": \"string\"}}}, \"Contact\": {\"type\": \"object\", \"properties\": {\"email\": {\"type\": \"string\"}, \"fixe\": {\"type\": \"string\"}, \"mobile\": {\"type\": \"string\"}}}, \"ContratV5\": {\"type\": \"object\", \"properties\": {\"codeEtat\": {\"type\": \"string\"}, \"data\": {\"$ref\": \"#/components/schemas/DataAssureV5\"}, \"numeroAMCEchange\": {\"type\": \"string\"}, \"numeroAdherent\": {\"type\": \"string\"}, \"numeroContrat\": {\"type\": \"string\"}, \"societeEmettrice\": {\"type\": \"string\"}}}, \"DataAssureV5\": {\"type\": \"object\", \"properties\": {\"adresse\": {\"$ref\": \"#/components/schemas/AdresseAssure\"}, \"contact\": {\"$ref\": \"#/components/schemas/Contact\"}, \"destinatairesPaiements\": {\"type\": \"array\", \"items\": {\"$ref\": \"#/components/schemas/DestinatairePrestationsV4\"}}, \"destinatairesRelevePrestations\": {\"type\": \"array\", \"items\": {\"$ref\": \"#/components/schemas/DestinataireRelevePrestationsV5\"}}, \"nom\": {\"$ref\": \"#/components/schemas/NomAssure\"}}}, \"Dematerialisation\": {\"type\": \"object\", \"properties\": {\"email\": {\"type\": \"string\"}, \"isDematerialise\": {\"type\": \"boolean\"}, \"mobile\": {\"type\": \"string\"}}}, \"DestinatairePrestationsV4\": {\"type\": \"object\", \"properties\": {\"adresse\": {\"$ref\": \"#/components/schemas/Adresse\"}, \"idBeyondDestinatairePaiements\": {\"type\": \"string\"}, \"idDestinatairePaiements\": {\"type\": \"string\"}, \"modePaiementPrestations\": {\"$ref\": \"#/components/schemas/ModePaiement\"}, \"nom\": {\"$ref\": \"#/components/schemas/NomDestinataireV3\"}, \"periode\": {\"$ref\": \"#/components/schemas/Periode\"}, \"rib\": {\"$ref\": \"#/components/schemas/RibAssure\"}}}, \"DestinataireRelevePrestationsV5\": {\"type\": \"object\", \"properties\": {\"adresse\": {\"$ref\": \"#/components/schemas/AdresseAssure\"}, \"dematerialisation\": {\"$ref\": \"#/components/schemas/Dematerialisation\"}, \"idBeyondDestinataireRelevePrestations\": {\"type\": \"string\"}, \"idDestinataireRelevePrestations\": {\"type\": \"string\"}, \"nom\": {\"$ref\": \"#/components/schemas/NomDestinataireV3\"}, \"periode\": {\"$ref\": \"#/components/schemas/Periode\"}}}, \"HistoriqueDateRangNaissance\": {\"type\": \"object\", \"properties\": {\"dateNaissance\": {\"type\": \"string\"}, \"rangNaissance\": {\"type\": \"string\"}}}, \"IdentiteContrat\": {\"required\": [\"dateNaissance\", \"numeroPersonne\", \"rangNaissance\"], \"type\": \"object\", \"properties\": {\"affiliationsRO\": {\"type\": \"array\", \"items\": {\"$ref\": \"#/components/schemas/NirRattachementRO\"}}, \"dateNaissance\": {\"type\": \"string\"}, \"historiqueDateRangNaissance\": {\"type\": \"array\", \"items\": {\"$ref\": \"#/components/schemas/HistoriqueDateRangNaissance\"}}, \"nir\": {\"$ref\": \"#/components/schemas/Nir\"}, \"numeroPersonne\": {\"type\": \"string\"}, \"rangNaissance\": {\"type\": \"string\"}, \"refExternePersonne\": {\"type\": \"string\"}}}, \"ModePaiement\": {\"required\": [\"code\", \"codeMonnaie\", \"libelle\"], \"type\": \"object\", \"properties\": {\"code\": {\"type\": \"string\"}, \"codeMonnaie\": {\"type\": \"string\"}, \"libelle\": {\"type\": \"string\"}}}, \"Nir\": {\"required\": [\"cle\", \"code\"], \"type\": \"object\", \"properties\": {\"cle\": {\"type\": \"string\"}, \"code\": {\"type\": \"string\"}}}, \"NirRattachementRO\": {\"required\": [\"nir\", \"periode\"], \"type\": \"object\", \"properties\": {\"nir\": {\"$ref\": \"#/components/schemas/Nir\"}, \"periode\": {\"$ref\": \"#/components/schemas/Periode\"}, \"rattachementRO\": {\"$ref\": \"#/components/schemas/RattachementRO\"}}}, \"NomAssure\": {\"required\": [\"civilite\", \"nomFamille\", \"prenom\"], \"type\": \"object\", \"properties\": {\"civilite\": {\"type\": \"string\"}, \"nomFamille\": {\"type\": \"string\"}, \"nomUsage\": {\"type\": \"string\"}, \"prenom\": {\"type\": \"string\"}}}, \"NomDestinataireV3\": {\"type\": \"object\", \"properties\": {\"civilite\": {\"type\": \"string\"}, \"nomFamille\": {\"type\": \"string\"}, \"nomUsage\": {\"type\": \"string\"}, \"prenom\": {\"type\": \"string\"}, \"raisonSociale\": {\"type\": \"string\"}}}, \"PagingResponseModel\": {\"type\": \"object\", \"properties\": {\"page\": {\"type\": \"integer\", \"format\": \"int32\"}, \"perPage\": {\"type\": \"integer\", \"format\": \"int32\"}, \"totalElements\": {\"type\": \"integer\", \"format\": \"int32\"}, \"totalPages\": {\"type\": \"integer\", \"format\": \"int32\"}}}, \"Periode\": {\"required\": [\"debut\"], \"type\": \"object\", \"properties\": {\"debut\": {\"type\": \"string\"}, \"fin\": {\"type\": \"string\"}}}, \"RattachementRO\": {\"type\": \"object\", \"properties\": {\"codeCaisse\": {\"type\": \"string\"}, \"codeCentre\": {\"type\": \"string\"}, \"codeRegime\": {\"type\": \"string\"}}}, \"RibAssure\": {\"required\": [\"bic\", \"iban\"], \"type\": \"object\", \"properties\": {\"bic\": {\"type\": \"string\"}, \"iban\": {\"type\": \"string\"}}}, \"TypeAdresse\": {\"type\": \"object\", \"properties\": {\"libelle\": {\"type\": \"string\"}, \"type\": {\"type\": \"string\"}}}}, \"securitySchemes\": {\"bearer\": {\"type\": \"http\", \"scheme\": \"bearer\", \"bearerFormat\": \"JWT\"}}}}",
    "order" : 1,
    "published" : false,
    "visibility" : "PUBLIC",
    "lastModificationDate" : 1694071227768,
    "contentType" : "application/json",
    "configuration" : { },
    "homepage" : false,
    "parentPath" : "",
    "excludedAccessControls" : false,
    "accessControls" : [ ],
    "metadata" : { },
    "api" : "d6e68e78-3f25-430e-a68e-783f25630ec4",
    "attached_media" : [ ]
  } ],
  "metadata" : [ {
    "key" : "email-support",
    "name" : "email-support",
    "format" : "MAIL",
    "value" : "${(api.primaryOwner.email)!''}",
    "defaultValue" : "support@change.me",
    "apiId" : "d6e68e78-3f25-430e-a68e-783f25630ec4"
  } ],
  "id" : "d6e68e78-3f25-430e-a68e-783f25630ec4",
  "path_mappings" : [ "/beneficiaryTpDetails", "/searchBeneficiaries" ],
  "proxy" : {
    "virtual_hosts" : [ {
      "host" : "i-489.dev.beyond.cegedim.cloud",
      "path" : "/beyond/internal/api/bdds/v1/otp",
      "override_entrypoint" : true
    } ],
    "strip_context_path" : false,
    "preserve_host" : false,
    "logging" : {
      "mode" : "CLIENT_PROXY",
      "content" : "HEADERS_PAYLOADS",
      "scope" : "REQUEST_RESPONSE"
    },
    "groups" : [ {
      "name" : "default-group",
      "endpoints" : [ {
        "backup" : false,
        "inherit" : true,
        "name" : "default",
        "weight" : 1,
        "type" : "http",
        "target" : "https://i-489.dev.beyond.cegedim.cloud"
      } ],
      "load_balancing" : {
        "type" : "ROUND_ROBIN"
      },
      "http" : {
        "connectTimeout" : 5000,
        "idleTimeout" : 60000,
        "keepAlive" : true,
        "readTimeout" : 10000,
        "pipelining" : false,
        "maxConcurrentConnections" : 100,
        "useCompression" : true,
        "followRedirects" : false
      }
    } ]
  },
  "response_templates" : { },
  "primaryOwner" : {
    "id" : "c32a6e63-86a0-492d-aa6e-6386a0692d68",
    "displayName" : "admin",
    "type" : "USER"
  }
}
